<!DOCTYPE html >
<html>
        <head>
          <meta http-equiv="X-UA-Compatible" content="IE=edge" />
          <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
          <title>Swam API Documentation 0.2.0-SNAPSHOT - swam.runtime.internals.compiler.low</title>
          <meta name="description" content="Swam API Documentation 0.2.0 - SNAPSHOT - swam.runtime.internals.compiler.low" />
          <meta name="keywords" content="Swam API Documentation 0.2.0 SNAPSHOT swam.runtime.internals.compiler.low" />
          <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
          
      <link href="../../../../../lib/index.css" media="screen" type="text/css" rel="stylesheet" />
      <link href="../../../../../lib/template.css" media="screen" type="text/css" rel="stylesheet" />
      <link href="../../../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css" />
      <script type="text/javascript" src="../../../../../lib/jquery.js"></script>
      <script type="text/javascript" src="../../../../../lib/jquery.panzoom.min.js"></script>
      <script type="text/javascript" src="../../../../../lib/jquery.mousewheel.min.js"></script>
      <script type="text/javascript" src="../../../../../lib/index.js"></script>
      <script type="text/javascript" src="../../../../../index.js"></script>
      <script type="text/javascript" src="../../../../../lib/scheduler.js"></script>
      <script type="text/javascript" src="../../../../../lib/template.js"></script>
      <script type="text/javascript" src="../../../../../lib/tools.tooltip.js"></script>
      
      <script type="text/javascript">
        /* this variable can be used by the JS to determine the path to the root document */
        var toRoot = '../../../../../';
      </script>
    
        </head>
        <body>
      <div id="search">
        <span id="doc-title">Swam API Documentation<span id="doc-version">0.2.0-SNAPSHOT</span></span>
        <span class="close-results"><span class="left">&lt;</span> Back</span>
        <div id="textfilter">
          <span class="input">
            <input autocapitalize="none" placeholder="Search" id="index-input" type="text" accesskey="/" />
            <i class="clear material-icons"></i>
            <i id="search-icon" class="material-icons"></i>
          </span>
        </div>
    </div>
      <div id="search-results">
        <div id="search-progress">
          <div id="progress-fill"></div>
        </div>
        <div id="results-content">
          <div id="entity-results"></div>
          <div id="member-results"></div>
        </div>
      </div>
      <div id="content-scroll-container" style="-webkit-overflow-scrolling: touch;">
        <div id="content-container" style="-webkit-overflow-scrolling: touch;">
          <div id="subpackage-spacer">
            <div id="packages">
              <h1>Packages</h1>
              <ul>
                <li name="_root_.root" visbl="pub" class="indented0 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="_root_"></a><a id="root:_root_"></a>
      <span class="permalink">
      <a href="index.html#_root_" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a title="" href="../../../../../index.html"><span class="name">root</span></a>
      </span>
      
      <div class="fullcomment"><dl class="attributes block"> <dt>Definition Classes</dt><dd><a href="../../../../../index.html" class="extype" name="_root_">root</a></dd></dl></div>
    </li><li name="_root_.swam" visbl="pub" class="indented1 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="swam"></a><a id="swam:swam"></a>
      <span class="permalink">
      <a href="index.html#swam" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a title="" href="../../../../index.html"><span class="name">swam</span></a>
      </span>
      
      <div class="fullcomment"><dl class="attributes block"> <dt>Definition Classes</dt><dd><a href="../../../../../index.html" class="extype" name="_root_">root</a></dd></dl></div>
    </li><li name="swam.runtime" visbl="pub" class="indented2 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="runtime"></a><a id="runtime:runtime"></a>
      <span class="permalink">
      <a href="../swam/index.html#runtime" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a title="This package contains all the classes and types related to running WebAssembly modules." href="../../../index.html"><span class="name">runtime</span></a>
      </span>
      
      <p class="shortcomment cmt">This package contains all the classes and types related to
running WebAssembly modules.</p><div class="fullcomment"><div class="comment cmt"><p>This package contains all the classes and types related to
running WebAssembly modules.</p><p>The entry point for almost all users will be <a href="../../../Engine.html" class="extype" name="swam.runtime.Engine">Engine</a>.
A typical use of the engine is:</p><pre><span class="kw">import</span> swam._
<span class="kw">import</span> text._
<span class="kw">import</span> runtime._
<span class="kw">import</span> exports._

<span class="kw">import</span> cats.implicits._
<span class="kw">import</span> cats.effect._

<span class="kw">import</span> java.nio.file.Paths

<span class="kw">val</span> tcompiler = Compiler[IO]
<span class="kw">val</span> engine = Engine[IO]

<span class="kw">for</span> {
  tcompiler <span class="kw">&lt;-</span> tcompiler
  engine <span class="kw">&lt;-</span> engine
  mod <span class="kw">&lt;-</span> engine.compile(<span class="cmt">/* source of the module */</span>)
  inst <span class="kw">&lt;-</span> mod.newInstance()
  f <span class="kw">&lt;-</span> inst.exports.function1[<span class="std">Int</span>, <span class="std">Int</span>](<span class="lit">"f"</span>)
  res <span class="kw">&lt;-</span> f(<span class="num">43</span>)
} <span class="kw">yield</span> res

println(res.unsafeRunSync())</pre></div><dl class="attributes block"> <dt>Definition Classes</dt><dd><a href="../../../../index.html" class="extype" name="swam">swam</a></dd></dl></div>
    </li><li name="swam.runtime.internals" visbl="pub" class="indented3 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="internals"></a><a id="internals:internals"></a>
      <span class="permalink">
      <a href="../../swam/runtime/index.html#internals" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a title="" href="../../index.html"><span class="name">internals</span></a>
      </span>
      
      <div class="fullcomment"><dl class="attributes block"> <dt>Definition Classes</dt><dd><a href="../../../index.html" class="extype" name="swam.runtime">runtime</a></dd></dl></div>
    </li><li name="swam.runtime.internals.compiler" visbl="pub" class="indented4 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="compiler"></a><a id="compiler:compiler"></a>
      <span class="permalink">
      <a href="../../../swam/runtime/internals/index.html#compiler" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a title="" href="../index.html"><span class="name">compiler</span></a>
      </span>
      
      <div class="fullcomment"><dl class="attributes block"> <dt>Definition Classes</dt><dd><a href="../../index.html" class="extype" name="swam.runtime.internals">internals</a></dd></dl></div>
    </li><li name="swam.runtime.internals.compiler.high" visbl="pub" class="indented5 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="high"></a><a id="high:high"></a>
      <span class="permalink">
      <a href="../../../../swam/runtime/internals/compiler/index.html#high" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a title="" href="../high/index.html"><span class="name">high</span></a>
      </span>
      
      <div class="fullcomment"><dl class="attributes block"> <dt>Definition Classes</dt><dd><a href="../index.html" class="extype" name="swam.runtime.internals.compiler">compiler</a></dd></dl></div>
    </li><li name="swam.runtime.internals.compiler.low" visbl="pub" class="indented5 current" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="low"></a><a id="low:low"></a>
      <span class="permalink">
      <a href="../../../../swam/runtime/internals/compiler/index.html#low" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <span class="name">low</span>
      </span>
      
      <div class="fullcomment"><dl class="attributes block"> <dt>Definition Classes</dt><dd><a href="../index.html" class="extype" name="swam.runtime.internals.compiler">compiler</a></dd></dl></div>
    </li><li class="current-entities indented5">
                        <span class="separator"></span>
                        <a class="class" href="Compiler.html" title="Compiles a valid module to the low level assembly language."></a>
                        <a href="Compiler.html" title="Compiles a valid module to the low level assembly language.">Compiler</a>
                      </li><li class="current-entities indented5">
                        <a class="object" href="FunctionContext$.html" title=""></a>
                        <a class="class" href="FunctionContext.html" title="Compilation context used when compiling instructions for a function."></a>
                        <a href="FunctionContext.html" title="Compilation context used when compiling instructions for a function.">FunctionContext</a>
                      </li><li class="current-entities indented5">
                        <span class="separator"></span>
                        <a class="class" href="LabelStack.html" title="A stack of labels, each one tracking following information:"></a>
                        <a href="LabelStack.html" title="A stack of labels, each one tracking following information:">LabelStack</a>
                      </li>
              </ul>
            </div>
          </div>
          <div id="content">
            <body class="package value">
      <div id="definition">
        <div class="big-circle package">p</div>
        <p id="owner"><a href="../../../../index.html" class="extype" name="swam">swam</a>.<a href="../../../index.html" class="extype" name="swam.runtime">runtime</a>.<a href="../../index.html" class="extype" name="swam.runtime.internals">internals</a>.<a href="../index.html" class="extype" name="swam.runtime.internals.compiler">compiler</a></p>
        <h1>low<span class="permalink">
      <a href="../../../../../swam/runtime/internals/compiler/low/index.html" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span></h1>
        
      </div>

      <h4 id="signature" class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <span class="name">low</span>
      </span>
      </h4>

      
          <div id="comment" class="fullcommenttop"><dl class="attributes block"> <dt>Source</dt><dd><a href="http://github.com/satabin/swam/tree/master//runtime/src/swam/runtime/internals/compiler/low/package.scala#L1" target="_blank">package.scala</a></dd></dl><div class="toggleContainer block">
          <span class="toggle">
            Linear Supertypes
          </span>
          <div class="superTypes hiddenContent"><span class="extype" name="scala.AnyRef">AnyRef</span>, <span class="extype" name="scala.Any">Any</span></div>
        </div></div>
        

      <div id="mbrsel">
        <div class="toggle"></div>
        <div id="memberfilter">
          <i class="material-icons arrow"></i>
          <span class="input">
            <input id="mbrsel-input" placeholder="Filter all members" type="text" accesskey="/" />
          </span>
          <i class="clear material-icons"></i>
        </div>
        <div id="filterby">
          <div id="order">
            <span class="filtertype">Ordering</span>
            <ol>
              
              <li class="alpha in"><span>Alphabetic</span></li>
              <li class="inherit out"><span>By Inheritance</span></li>
            </ol>
          </div>
          <div class="ancestors">
                  <span class="filtertype">Inherited<br />
                  </span>
                  <ol id="linearization">
                    <li class="in" name="swam.runtime.internals.compiler.low"><span>low</span></li><li class="in" name="scala.AnyRef"><span>AnyRef</span></li><li class="in" name="scala.Any"><span>Any</span></li>
                  </ol>
                </div><div class="ancestors">
              <span class="filtertype"></span>
              <ol>
                <li class="hideall out"><span>Hide All</span></li>
                <li class="showall in"><span>Show All</span></li>
              </ol>
            </div>
          <div id="visbl">
              <span class="filtertype">Visibility</span>
              <ol><li class="public in"><span>Public</span></li><li class="all out"><span>All</span></li></ol>
            </div>
        </div>
      </div>

      <div id="template">
        <div id="allMembers">
        

        <div id="types" class="types members">
              <h3>Type Members</h3>
              <ol><li name="swam.runtime.internals.compiler.low.Compiler" visbl="pub" class="indented0 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="Compiler[F[_]]extendsCompiler[F]"></a><a id="Compiler[F[_]]:Compiler[F]"></a>
      <span class="permalink">
      <a href="../../../../../swam/runtime/internals/compiler/low/index.html#Compiler[F[_]]extendsCompiler[F]" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a title="Compiles a valid module to the low level assembly language." href="Compiler.html"><span class="name">Compiler</span></a><span class="tparams">[<span name="F">F<span class="tparams">[<span name="_">_</span>]</span></span>]</span><span class="result"> extends <a href="../Compiler.html" class="extype" name="swam.runtime.internals.compiler.Compiler">compiler.Compiler</a>[<span class="extype" name="swam.runtime.internals.compiler.low.Compiler.F">F</span>]</span>
      </span>
      
      <p class="shortcomment cmt">Compiles a valid module to the low level <a href="../../interpreter/low/Asm$.html" class="extype" name="swam.runtime.internals.interpreter.low.Asm">assembly language</a>.</p><div class="fullcomment"><div class="comment cmt"><p>Compiles a valid module to the low level <a href="../../interpreter/low/Asm$.html" class="extype" name="swam.runtime.internals.interpreter.low.Asm">assembly language</a>.
This is a one-pass assembler which generates typed breaks.</p><p>This compiler executes the static part of the specification semantics, i.e. the one
dealing with labels and breaks. The static restrictions on the WebAssembly bytecodes
make it possible to statically compute the local stack size at any point in a function
body. Of course, it assumes that the module is <a href="../../../../validation/Validator.html" class="extype" name="swam.validation.Validator">valid</a>
otherwise it will break or generate undefined assembly code.</p></div></div>
    </li><li name="swam.runtime.internals.compiler.low.FunctionContext" visbl="pub" class="indented0 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="FunctionContextextendsProductwithSerializable"></a><a id="FunctionContext:FunctionContext"></a>
      <span class="permalink">
      <a href="../../../../../swam/runtime/internals/compiler/low/index.html#FunctionContextextendsProductwithSerializable" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">case class</span>
      </span>
      <span class="symbol">
        <a title="Compilation context used when compiling instructions for a function." href="FunctionContext.html"><span class="name">FunctionContext</span></a><span class="params">(<span name="labels">labels: <a href="LabelStack.html" class="extype" name="swam.runtime.internals.compiler.low.LabelStack">LabelStack</a></span>, <span name="errata">errata: <span class="extype" name="scala.Predef.Map">Map</span>[<span class="extype" name="scala.Int">Int</span>, <a href="#Target=Int" class="extmbr" name="swam.runtime.internals.compiler.low.Target">Target</a>]</span>, <span name="offsets">offsets: <span class="extype" name="scala.Predef.Map">Map</span>[<a href="#Target=Int" class="extmbr" name="swam.runtime.internals.compiler.low.Target">Target</a>, <span class="extype" name="scala.Int">Int</span>]</span>, <span name="offset">offset: <span class="extype" name="scala.Int">Int</span></span>, <span name="nxt">nxt: <span class="extype" name="scala.Int">Int</span></span>)</span><span class="result"> extends <span class="extype" name="scala.Product">Product</span> with <span class="extype" name="scala.Serializable">Serializable</span></span>
      </span>
      
      <p class="shortcomment cmt">Compilation context used when compiling instructions for a function.</p><div class="fullcomment"><div class="comment cmt"><p>Compilation context used when compiling instructions for a function.
The label stack represents the static trace of the program so far in
terms of stack modifications, the errata registers the label to fix
later, and the jump label offsets.
This allows to compile code in one pass even with forward jumps.</p><p>The <code>errata</code> maps offset in the function code to label name.</p><p>The <code>offsets</code> maps label names to their offset.</p><p>Once all code has been generated, the placeholders pointed by the <code>errata</code>
map are replaced with real offsets from the <code>offsets</code> map.
</p></div></div>
    </li><li name="swam.runtime.internals.compiler.low.LabelStack" visbl="pub" class="indented0 " data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="LabelStackextendsProductwithSerializable"></a><a id="LabelStack:LabelStack"></a>
      <span class="permalink">
      <a href="../../../../../swam/runtime/internals/compiler/low/index.html#LabelStackextendsProductwithSerializable" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">case class</span>
      </span>
      <span class="symbol">
        <a title="A stack of labels, each one tracking following information:" href="LabelStack.html"><span class="name">LabelStack</span></a><span class="params">(<span name="parent">parent: <a href="LabelStack.html" class="extype" name="swam.runtime.internals.compiler.low.LabelStack">LabelStack</a></span>, <span name="target">target: <a href="#Target=Int" class="extmbr" name="swam.runtime.internals.compiler.low.Target">Target</a></span>, <span name="arity">arity: <span class="extype" name="scala.Int">Int</span></span>, <span name="pushed">pushed: <span class="extype" name="scala.Int">Int</span></span>)</span><span class="result"> extends <span class="extype" name="scala.Product">Product</span> with <span class="extype" name="scala.Serializable">Serializable</span></span>
      </span>
      
      <p class="shortcomment cmt">A stack of labels, each one tracking following information:</p><div class="fullcomment"><div class="comment cmt"><p>A stack of labels, each one tracking following information:</p><ul><li>the parent label</li><li>its target on break</li><li>its arity (i.e. the number of return value to pop and return on break)</li><li>the number of pushed value so far for the current label
At top-level, the parent is <code>null</code> and target is <code>0</code>.
No checks need to be performed because the compiler is only called if the
program is correct, in which case all breaks target an existing label.
The top-level label is a special synthesized one, representing the top-level
block of the function body.
</li></ul></div></div>
    </li><li name="swam.runtime.internals.compiler.low.Target" visbl="pub" class="indented0 " data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="Target=Int"></a><a id="Target:Target"></a>
      <span class="permalink">
      <a href="../../../../../swam/runtime/internals/compiler/low/index.html#Target=Int" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">type</span>
      </span>
      <span class="symbol">
        <span class="name">Target</span><span class="result alias"> = <span class="extype" name="scala.Int">Int</span></span>
      </span>
      
      <p class="shortcomment cmt">A target label for a break</p>
    </li></ol>
            </div>

        

        <div class="values members">
              <h3>Value Members</h3>
              <ol>
                <li name="swam.runtime.internals.compiler.low.FunctionContext" visbl="pub" class="indented0 " data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="FunctionContext"></a><a id="FunctionContext:FunctionContext"></a>
      <span class="permalink">
      <a href="../../../../../swam/runtime/internals/compiler/low/index.html#FunctionContext" title="Permalink">
        <i class="material-icons"></i>
      </a>
    </span>
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a title="" href="FunctionContext$.html"><span class="name">FunctionContext</span></a><span class="result"> extends <span class="extype" name="scala.Serializable">Serializable</span></span>
      </span>
      
      
    </li>
              </ol>
            </div>

        

        
        </div>

        <div id="inheritedMembers">
        <div class="parent" name="scala.AnyRef">
              <h3>Inherited from <span class="extype" name="scala.AnyRef">AnyRef</span></h3>
            </div><div class="parent" name="scala.Any">
              <h3>Inherited from <span class="extype" name="scala.Any">Any</span></h3>
            </div>
        
        </div>

        <div id="groupedMembers">
        <div class="group" name="Ungrouped">
              <h3>Ungrouped</h3>
              
            </div>
        </div>

      </div>

      <div id="tooltip"></div>

      <div id="footer">  </div>
    </body>
          </div>
        </div>
      </div>
    </body>
      </html>
